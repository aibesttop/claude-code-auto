# Work directories
directories:
  work_dir: "demo_act"
  mirror_dir: "demo_mirror"
  state_file: "workflow_state.json"
  logs_dir: "logs"

# Task configuration
task:
  goal: "参考柳叶刀最新的养老相关文章，总结出养老行业在app行业的机会点，并给出养老行业在app行业的商业模式，格式为.md文件。"
  initial_prompt: "你们是一个顶级的app创业团队，从市场调研，和创意发掘，包括找投资人都有一套自己的一套方案，希望先从养老行业开始调研。"

# Safety limits
safety:
  max_iterations: 50
  max_duration_hours: 8
  emergency_stop_file: ".emergency_stop"
  iteration_timeout_minutes: 30

# Error handling
error_handling:
  max_retries: 3
  retry_delay_seconds: 5
  continue_on_error: false
  save_error_logs: true

# Session management
session:
  session_id_file: "session_id.txt"
  backup_session_file: "session_id.backup.txt"
  session_timeout_hours: 24

# JSON parsing
json_parser:
  max_parse_retries: 3
  strict_mode: false
  default_confidence: 0.5

# Logging
logging:
  level: "INFO"
  format: "detailed"
  console_output: true
  file_output: true
  max_file_size_mb: 10
  backup_count: 5

# Claude SDK
claude:
  permission_mode: "bypassPermissions"
  model: "claude-sonnet-4-5"
  timeout_seconds: 300
  # Timeout hierarchy (higher levels get more time)
  timeouts:
    planner: 600      # Planner: 10 min (first call: 2x = 20 min)
    executor: 300     # Executor: 5 min per ReAct step
    validator: 120    # Semantic validator: 2 min
    decomposer: 180   # Mission decomposer: 3 min

# Performance
performance:
  use_incremental_sync: true
  exclude_patterns:
    - "*.pyc"
    - "__pycache__"
    - ".git"
    - "*.log"
    - "session_id*.txt"
    - "workflow_state.json"

# Persona (dynamic)
persona:
  default_persona: "coder"
  personas:
    security_auditor:
      description: "Security-focused engineer for sandbox and tool vetting"
      system_prompt: "You are a Security Auditor. You inspect commands and code for safety risks, sandboxing, and least privilege."
    researcher:
      description: "Web research specialist"
      system_prompt: "You are a Research Analyst. You search, cross-check, and summarize with citations."

# Observability
observability:
  enable_event_log: true
  enable_cost_log: true

# Research provider
research:
  provider: "tavily"
  enabled: true

# Cost control
cost_control:
  enabled: false
  max_budget_usd: 10.0
  warning_threshold: 0.8
  auto_stop_on_exceed: true

# Leader Agent (v4.0) - Dynamic orchestration
leader:
  enabled: true  # Set to true to enable Leader mode
  max_mission_retries: 3
  quality_threshold: 70.0
  enable_intervention: true
  resource_config_dir: "resources"

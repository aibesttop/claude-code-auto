$schema: "http://json-schema.org/draft-07/schema#"
title: QualityScore
description: 多维度质量评估结果

type: object
required:
  - overall_score
  - dimension_scores
  - passed
  - threshold
  - evaluation_time
  - evaluator_version

properties:
  overall_score:
    type: number
    minimum: 0
    maximum: 100
    description: "加权总分 (0-100)"

  dimension_scores:
    type: array
    items:
      type: object
      required: [dimension, score, weight, evidence, issues, suggestions]
      properties:
        dimension:
          type: string
          enum: [format, content, quality_llm, tests, static, security, performance]
        score:
          type: number
          minimum: 0
          maximum: 100
        weight:
          type: number
          minimum: 0
          maximum: 1.0
        evidence:
          type: object
          description: "评分证据"
        issues:
          type: array
          items:
            type: string
          description: "发现的问题"
        suggestions:
          type: array
          items:
            type: string
          description: "改进建议"

  passed:
    type: boolean
    description: "是否通过阈值"

  threshold:
    type: number
    minimum: 0
    maximum: 100
    description: "通过阈值"

  evaluation_time:
    type: string
    format: date-time
    description: "评估时间"

  evaluator_version:
    type: string
    description: "评估器版本"

  replay_context:
    type: object
    description: "用于重放的上下文"
    properties:
      mission_id:
        type: string
      mission_version:
        type: string
      outputs:
        type: array
        items:
          type: string
      work_dir:
        type: string
      evaluator_config:
        type: object
      dimension_weights:
        type: object

additionalProperties: false
